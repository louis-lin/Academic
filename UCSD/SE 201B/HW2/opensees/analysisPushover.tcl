# ####################################################################################
# SE 201B: NONLINEAR STRUCTURAL ANALYSIS (WI 2021)
# OpenSees Tutorial # 3
# 2D FRAME ANALYSIS (LINEAR MATERIAL + NONLINEAR GEOMETRY) EXAMPLE
# ####################################################################################

# ------------------------------------------------------------------------------------
# CREATE THE DOF NUMBERER
# ------------------------------------------------------------------------------------
numberer Plain;

# ------------------------------------------------------------------------------------
# CREATE THE CONSTRAINT HANDLER
# ------------------------------------------------------------------------------------
constraints Transformation; 

# ------------------------------------------------------------------------------------
# CREATE THE SYSTEM OF EQUATIONS
# ------------------------------------------------------------------------------------
system BandGeneral;

# ------------------------------------------------------------------------------------
# CREATE THE INTEGRATION SCHEME
# ------------------------------------------------------------------------------------
set lambda 0.01; # Set the load factor increment.
integrator LoadControl $lambda; # The LoadControl scheme

# ------------------------------------------------------------------------------------
# CREATE THE CONVERGENCE TEST
# ------------------------------------------------------------------------------------
test NormDispIncr 1.0e-5 1000000;

# ------------------------------------------------------------------------------------
# CREATE SOLUTION ALGORITHM
# ------------------------------------------------------------------------------------
algorithm Newton

# ------------------------------------------------------------------------------------
# CREATE THE ANALYSIS OBJECT
# ------------------------------------------------------------------------------------
analysis Static;

# ------------------------------------------------------------------------------------
# RECORD AND SAVE OUTPUT
# ------------------------------------------------------------------------------------
source generateRecorders.tcl;

# ------------------------------------------------------------------------------------
# ANALYZE, i.e., INVOKE RUN ON ANALYSIS OBJECT
# ------------------------------------------------------------------------------------
set nSteps [expr int(1./$lambda)];
set ok [analyze $nSteps];
